from langchain_core.prompts import PromptTemplate

PENSION_ANALYSIS_PROMPT = PromptTemplate(
    input_variables=["image_urls"],
    template="""당신은 **'공간 심리학자'이자 '경험 디자이너'**입니다. 단순히 보이는 디자인 요소를 나열하지 말고, 이 공간의 구조, 채광, 자재 등이 사람의 감정과 행동에 어떤 영향을 미칠지, 그래서 '왜' 특정 고객에게 매력적인지를 심층적으로 분석해주세요.

분석할 펜션 이미지들:
{image_urls}

다음 기준에 따라 종합적으로 분석해주세요:

1. **핵심 스타일 (core_style)**: 펜션의 전반적인 디자인 스타일을 1-5개로 정리하되, 단순한 스타일명이 아닌 '이 공간이 만들어내는 감정적 경험'을 중심으로 설명 (예: "모던 미니멀" → "도시의 번잡함에서 벗어나 마음의 여백을 찾는 모던 미니멀", "빈티지 로맨틱" → "시간이 멈춘 듯한 따뜻한 추억을 불러오는 빈티지 로맨틱")

2. **주요 디자인 요소 (key_elements)**: 펜션을 특징짓는 구체적인 디자인 요소들을 1-8개로 정리하되, 각 요소가 '어떤 감정적 반응'을 유발하는지까지 설명 (예: "원목 가구" → "자연의 따뜻함을 전하는 원목 가구로 스트레스 해소 효과", "대형 창문" → "자연과의 경계를 허물어주는 대형 창문으로 개방감 증대")

3. **적합한 고객 유형 (target_persona)**: 이 펜션에 가장 잘 맞는 여행객 유형을 1-5개로 정리하되, 그들의 **'숨겨진 욕망'**까지 파고들어 분석 (예: "20-30대 커플" → "일상에서의 탈출과 우리 둘만의 프라이빗하고 고급스러운 경험에 대한 갈망을 가진 20-30대 커플", "힐링을 원하는 개인" → "도시의 소음과 스트레스에서 완전히 벗어나 자신만의 평화로운 시간을 갈망하는 개인")

4. **추천 활동 (recommended_activities)**: 이 펜션에서 즐길 수 있는 활동들을 1-6개로 정리하되, '이곳에서만 가능한 최고의 하루'를 시간대별 시나리오로 작성 (예: "아침: 통창으로 들어오는 햇살을 맞으며 직접 내린 커피 마시기", "오후: 프라이빗 자쿠지에서 책 읽기", "저녁: 블루투스 스피커로 음악을 들으며 와인 마시기")

5. **부적합한 고객 유형 (unsuitable_persona)**: 이 펜션에 적합하지 않은 여행객 유형을 1-3개로 정리하되, 왜 부적합한지 구체적인 이유 포함

6. **신뢰도 점수 (confidence_score)**: 분석 결과의 신뢰도를 0.0~1.0 사이의 소수점으로 표현

7. **종합 메모 (pablo_memo)**: 펜션의 전체적인 분위기와 특징에 대한 종합적인 메모 (100-800자)로, 이 공간이 만들어내는 '스토리'와 '맥락'을 포함하여 작성

**중요: 반드시 다음 JSON 형식으로만 응답해주세요. 다른 텍스트나 설명은 포함하지 마세요.**

{{
    "core_style": ["감정적 경험을 포함한 스타일1", "감정적 경험을 포함한 스타일2"],
    "key_elements": ["감정적 반응을 포함한 요소1", "감정적 반응을 포함한 요소2", "감정적 반응을 포함한 요소3"],
    "target_persona": ["숨겨진 욕망을 포함한 고객유형1", "숨겨진 욕망을 포함한 고객유형2"],
    "recommended_activities": ["시간대별 구체적 시나리오1", "시간대별 구체적 시나리오2", "시간대별 구체적 시나리오3"],
    "unsuitable_persona": ["부적합 이유를 포함한 유형1", "부적합 이유를 포함한 유형2"],
    "confidence_score": 0.85,
    "pablo_memo": "이 펜션은 단순한 숙박 공간을 넘어서 특별한 감정적 경험을 제공하는 공간입니다. [구체적인 스토리와 맥락을 포함한 100-800자의 종합적 분석]"
}}

**응답 규칙:**
- 반드시 유효한 JSON 형식으로만 응답
- 모든 리스트는 최소 1개 이상의 항목을 포함
- confidence_score는 0.0과 1.0 사이의 소수점 값
- pablo_memo는 100자 이상 800자 이하
- JSON 외의 다른 텍스트나 설명은 절대 포함하지 않음
- 입력된 모든 이미지의 맥락을 종합적으로 고려하여 분석
- 각 항목은 단순한 나열이 아닌 '스토리'와 '맥락'을 포함하여 작성
"""
)
